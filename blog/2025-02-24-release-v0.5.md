---
authors: [altafan, louisinger, bordalix]
description: Release ARK v0.5, featuring new VTXO Tree signing scheme and Connector Tree.
# image: /img/ark-release-v0.5x.jpg
slug: ark-release-v0.5
tags: [ark, bitcoin, layer2, blockchain]
title: "ARK v0.5 | Branch-only Signing Sessions and Connector Trees"
---

<!-- ![Photo by John Doe](/img/ark-release-v0.5.jpg)
_Photo by [John Doe](https://unsplash.com/@johndoe) on [Unsplash](https://unsplash.com)_ -->

We're pleased to announce the release of Ark v0.5. This update primarily focuses on consolidation and optimizations, with two notable feature changes aimed at improving the efficiency, scalability and robustness of the service.

<!-- truncate -->

## 🆕 New Features

### ✍️ Branch-only VTXO Tree Signing

We've modified how clients interact with the server during the VTXO tree signing process. Previously, clients were required to sign the entire tree of transactions, which could become computationally intensive as the tree grew. In this new version, clients only need to sign their specific branches within the tree.

This change significantly reduces the computational load on clients, especially in larger rounds. For example, in a round with 64 participants, each one now only needs to sign 6 transactions rather than all 127, leading to a substantial reduction in signing time and resource usage.

Clients can still decide to sign the whole tree of transactions if they want, leaving space to watchtowers-like solutions where a one delegates or asks another entity the (co-)signing a VTXO tree.

### 🔗 Connectors tree

We've changed the structure of connectors from a linear list to a tree structure. This architectural shift in the server has a direct impact on how clients deal with forfeit transactions when joining a round.

In the previous version, for each vtxo spent in a round, clients needed to sign N forfeit transactions, where N was the total number of vtxos spent in the round, ie. the length of the connector chain. The reason for this was ensuring the server to broadcast the less possible number of connector txs when reacting to a fraud (a user unrolling his branch after forfeiting the vtxo ad the edge of it).  
This could lead to a significant number of signatures required. For instance, a user joining a round with a total of 50 spent vtxos would have signed 50 forfeit txs for each of his spent vtxos. If he forfeited 2 vtxos, he would have signed 100 forfeit txs!

With the new tree structure, clients now only need to sign 1 forfeit transaction per VTXO when joining a round! On the other side, the server now has a constant number of txs to broadcast to react to a fraud, that can be taken under control by using a different tree radix based on how many connectors need to be created.
This change not only reduces the number of required signatures but also simplifies and speeds up the overall round joining process.


## 🛠️ Optimizations

### 🌐 Network Compatibility and Transaction Costs

We've expanded the server's compatibility to run on any Bitcoin network but TestNet4. We will add support for it in a later version as it requires changes to some of our external dependencies too.

We've also eliminated the minimum relay fee previously charged on redeem transactions. This is an optional configuration that can be enabled on the server's start up. With this option enabled, the redeem transactions can't be put onchain in case of distaster scenario as they don't meet the min relay fee mempool requirement. This is mostly a preview of how things will look like as soon as bitcoin v29 including 0-value anchor outputs is released.

### 🔄 Round Processing and Client Interaction

The server now more efficiently handles what we internally call "noise" during round processing. This includes scenarios such as clients performing the same operation multiple times or non-selected clients attempting to submit tree signatures or forfeit transactions.

We've implemented a more robust filtering mechanism in the server's round processing pipeline. This system now effectively ignores redundant or irrelevant client actions, leading to smoother and predicatble round execution.

On the client side, we've updated the SDK to include a check for round selection. Clients now verify if they've been chosen for the current round before attempting to participate. If not selected, they'll wait for the next round, reducing unnecessary network traffic.

### 📈 Scalability Improvements

One of the most significant optimizations in this release is the improvement in the server's ability to handle larger rounds. We've enhanced the verification speed for signed VTXO trees and forfeit transactions, allowing the server to efficiently process rounds with over 100 participants.

We've also improved the round finalization process. Instead of using fixed timeouts for each stage (musig2 data exchange, tree signing, forfeit txs signing), the server now dynamically moves to the next phase as soon as all required data is collected and verified. The faster the clients actions, the faster is the round completion. 

This is an example of round tx with 100 participants https://mutinynet.com/tx/858ee60788a040b56470c777cccf4feae79add4d2c8289213cb3e72153237b9b. In this similation, the server used a timeout of 60 seconds to complete the round but it only took 7s!

### 💻 Client SDK API Update

We've refined the onchain capabilities of the SDK client by replacing the general-purpose `SendOnChain` API in the SDK with more specialized methods designed to handle specific scenarios such as expired boarding UTXOs and unrolled VTXOs that have reached maturity for the claim.

Additionally, we've introduced a new API in the SDK client that notifies users of updates to their VTXO set in real-time. This feature uses an event-based system to propagate VTXO state changes to the client application, enabling more responsive user interfaces and smoother integration with external systems.

Changelog:
- `CollaborativeRedeem` -> `CollaborativeExit`
- `UnilateralRedeem` -> `StartUnilateralExit`
- `SendOnchain` replaced by `OnboardAgainAllExpiredBoardings`, `WithdrawFromAllExpiredBoardings` and `CompleteUnilateralExit`
- Added `GetVtxoEventChannel` to get notified about updates in the client's VTXO set.
- 
## Conclusion

These updates represent our ongoing efforts to improve Ark's performance and usability. While we've made progress, we acknowledge that there's always room for further enhancement. We appreciate the continued support and feedback from our user community, which plays a crucial role in shaping the development of Ark.

We recommend users update to this latest version to benefit from these improvements. As always, we welcome any feedback or issues you may encounter.